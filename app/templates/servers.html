{% extends 'base.html' %}

{% block content %}
<div class="content-wrapper">
    <div class="container">
        <div class="main-content">
            {% for system in systems %}
            <h1>{{ system.mac_address }} <span style="float: right;">ID: {{ system.id }}</span></h1>
            <h2>IP Addresses: {{ system.ip_address }}</h2>
            <h2>Операционная система: {{ system.os }}</h2>
            {% if system.is_web_app %}
            <p style="color: green;">Есть запущенные веб-приложения</p>
            {% else %}
            <p style="color: red;">Веб-приложения не найдены</p>
            {% endif %}
            <table>
                <thead>
                    <tr>
                        <th>Порт</th>
                        <th>Протокол</th>
                        <th>Служба</th>
                        <th>Версия</th>
                    </tr>
                </thead>
                <tbody>
                    {% for service in system.port_services %}
                    <tr>
                        <td>{{ service.port }}</td>
                        <td>{{ service.protocol }}</td>
                        <td>{{ service.service_name }}</td>
                        <td>{{ service.service_version }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            <hr style="color: aliceblue;">
            {% endfor %}
        </div>
    </div>
</div>

<div class="floating-block">
    <form action="/scan" method="get">
        <button type="submit">Сканировать</button>
    </form>
    <form action="/scan_delete_all" method="post" onsubmit="return confirm('Вы уверены?')" >
        <button type="submit" >Сброс данных</button>
    </form>
</div>

<style>
    .content-wrapper {
        display: flex;
        justify-content: center;
        flex-wrap: wrap;
    }

    .container {
        display: flex;
        flex-wrap: wrap;
    }

    .main-content {
        flex: 3;
        min-width: 60%;
    }

    .floating-block {
        position: fixed;
        right: 20px;
        top: 80px;
        width: 200px;
        background-color: #888;
        padding: 20px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        border-radius: 8px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
    }

    .floating-block button {
        width: 100%;
        padding: 10px;
        margin: 10px 0;
        font-size: 16px;
        cursor: pointer;
        border: none;
        border-radius: 4px;
    }

    @media (max-width: 1360px) {
        .floating-block {
            position: static;
            width: 100%;
            margin: 20px 0;
            display: flex;
            flex-direction: row;
            justify-content: space-around;
        }

        .floating-block button {
            width: 45%;
            margin: 10px 2%;
        }
    }
</style>
{% endblock content %}
