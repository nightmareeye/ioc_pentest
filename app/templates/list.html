{% extends 'base.html' %}

{% block content %}



    <br>
    <h2>Задачи</h2>
        <hr>
        <table>
    {% for t in table %}
        <tr>
        {% for i in t %}
            <td>{{ i }}</td>
        {% endfor %}
        </tr>
    {% endfor %}
     </table>
    <div>

        <br>

        <br>
        {% for name, titles in fullnames.items() %}
            {% if titles != [] %}
            <h4> {{ name }}:</h4>
            {% for todo in titles %}
                <div class="task">
                    {% if todo.completed %}
                        <strike>{{ todo.title }}</strike>
                    {% else %}
                        {{ todo.title }}
                    {% endif %}
                    <small>
                        <a class="pulse" href="edit/{{ todo.id }}">Редактировать</a>
                        <a class="pulse" href="delete/{{ todo.id }}">Удалить</a>
                        <form action="complete/{{ todo.id }}">
                            {% if todo.completed %}
                                <button class="button-grad" type="submit"> Выполнено</button>
                            {% endif %}
                            {% if  not todo.completed %}
                                <button class="button-grad" type="submit"> Не выполнено</button>
                            {% endif %}
                        </form>
                    </small>
                </div>
            {% endfor %}
        {% endif %}
        {% endfor %}
    </div>
    <hr>
    <div>

        <form action="/delete_all" method="post" onsubmit="return confirm('Вы уверены?')" >
            <button class="button-grad" type="submit" >Удалить всё</button>
        </form>
    </div>
   <div>
</div>

    <form>
        Страницы:
        {% for i in range(pages)%}
            <a rel={{ i + 1 }}
                    {% if (i)==page%}style="color:red;"{% endif %}
                    href="/list?max={{ max }}&skip={{i}}&token={{ token }}" > {{ i + 1}}</a>
        {% endfor %}
    </div>
    </form>

{% endblock content %}